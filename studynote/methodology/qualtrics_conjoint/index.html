<!DOCTYPE html>
<html lang="ja-jp">
    <head>
        <script defer src="../../../fa/fontawesome-all.js"></script>
        

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Qualtricsでコンジョイント分析</title>
        
        <style>

    html body {
        font-family: 'Noto Sans', sans-serif;
        background-color: white;
    }

    :root {
        --accent: darkred;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://www.jaysong.net/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Sans">


 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/php.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/html.min.js"></script>
    
    <script>hljs.initHighlightingOnLoad();</script>






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.70.0" />
        

        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-96999602-1"></script>
            <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments)};
              gtag('js', new Date());
              gtag('config', 'UA-96999602-1');
              gtag('set', {'user_id': 'USER_ID'});
            </script>
        

        
            <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        

        

    </head>

    <body>
        

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand visible-xs" href="#">Qualtricsでコンジョイント分析</a>
                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="../../../">Home</a></li>
                            
                                <li><a href="../../../about/">CV</a></li>
                            
                                <li><a href="../../../research/">Research</a></li>
                            
                                <li><a href="../../../teaching/">Teaching</a></li>
                            
                                <li><a href="../../../software/">Software</a></li>
                            
                                <li><a href="../../../notes/">Notes</a></li>
                            
                                <li><a href="../../../tutorial/">Tutorial</a></li>
                            
                        </ul>
                    
                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="mailto:jasong@mail.doshisha.ac.jp"><i class="far fa-envelope"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/Tintstyle/"><i class="fab fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.facebook.com/tintstyle"><i class="fab fa-facebook"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.instagram.com/tintstyle/"><i class="fab fa-instagram"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/JaehyunSong/"><i class="fab fa-github"></i></a></li>
                            
                        </ul>
                    
                </div>
            </div>
        </nav>


<main>

    <div>
        <h2><center>Qualtricsでコンジョイント分析</center></h2>
        <h5><center></center></h5>
        <center>
<a href="https://www.jaysong.net/tags/conjoint"><kbd class="item-tag">Conjoint</kbd></a>

<a href="https://www.jaysong.net/tags/qualtrics"><kbd class="item-tag">Qualtrics</kbd></a>

</center>
    </div>

    <div align="start" class="content"><p>Qualtricsでコンジョイント(Conjoint)分析のための調査票を作成する手順を紹介します。QualtricsにもConjoint機能がありますが、ここで目指すのはHoriuchi, Smith, and Yamamoto(2015)のような調査[<a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2627907">SSRN Link</a>]を目指します。今後、</p>

<ul>
<li>時間があるときに画像を添付したいと思います。</li>
<li>Conjoint SDTには他にもいろんな機能があるので、それもいつか紹介します。</li>
<li>また、ここから得られたデータをRで分析可能な形にする方法もいつか。</li>
</ul>

<hr>

<h2 id="目標">目標</h2>

<ul>
<li>このような調査をしたいと想定する。</li>
</ul>

<p>Q1. 最も好きな候補者を選択してください。</p>

<table class="pure-table pure-table-horizontal table table-responsive table-striped">
<thead>
<tr>
<th></th>
<th>候補者1</th>
<th>候補者2</th>
<th>候補者3</th>
</tr>
</thead>

<tbody>
<tr>
<td>消費税</td>
<td>10% (引き上げ)</td>
<td>0% (廃止)</td>
<td>8% (維持)</td>
</tr>

<tr>
<td>集団的自衛権</td>
<td>容認</td>
<td>容認</td>
<td>否認</td>
</tr>

<tr>
<td>福祉</td>
<td>拡充</td>
<td>縮小</td>
<td>維持</td>
</tr>
</tbody>
</table>

<ul>
<li>候補者1</li>
<li>候補者2</li>

<li><p>候補者3</p></li>

<li><p>赤い部分はランダムで表示される。</p></li>

<li><p>用語を決めておくと</p>

<ul>
<li><strong>タスク(task):</strong> 質問の数を意味し、この例では2である。</li>
<li><strong>プロフィール(profile):</strong> 選択肢の数を意味し、ここでは3である。(候補者1~3 / A~C)</li>
<li><strong>属性(attribute):</strong> 各プロフィールが有する特性であり、ここでは3である。(消費税、集団的自衛権、福祉)</li>
<li><strong>水準(level):</strong> 各属性がとりうる値である。たとえば福祉の水準は3つである。(拡充、維持、縮小)
<br></li>
</ul></li>
</ul>

<hr>

<h2 id="1-conjoint-survey-design-tool">1. Conjoint Survey Design Tool</h2>

<ul>
<li>著者のホームページ[<a href="http://scholar.harvard.edu/astrezhnev/conjoint-survey-design-tool">Link</a>]からファイルをダウンロードする。私の環境はMac OS XなのでPython Source (All Platforms)のファイルをダウンロードした。

<ul>
<li>2020年4月現在、上記のリンク先へのアクセスが出来ません。ただし、<a href="https://github.com/astrezhnev/conjointsdt">著者のGitHubレポジトリー</a>からダウンロード可能です。</li>
</ul></li>
<li>ダウンロードしたファイルを解凍する。</li>
</ul>

<p><figure><img src="../Figures/001.png" alt=""></figure></p>

<ul>
<li>Conjoint Survey Design Tool(SDT)を起動する。

<ul>
<li>Mac OS XだとターミナルでSDTを回答したフォルダへ移動し<code>python conjointSDT.py</code>と入力する。(python3では起動不可)</li>
</ul></li>
</ul>

<h3 id="11-taskとprofileの設定">1.1. TaskとProfileの設定</h3>

<p><figure><img src="../Figures/002.png" alt=""></figure></p>

<ol>
<li>メニューから[Edit] → [Settings]へ</li>
</ol>

<p><figure><img src="../Figures/003.png" alt=""></figure></p>

<ol start="2">
<li>Number of Tasks per Respondentを2と入力</li>
<li>Number of Profiles per Taskを3と入力</li>
<li>また、ここでは消費税、集団的自衛権、福祉といった固定された順番で表示されるのでRandomize order of attributes for each respondentsのチェックを外す。</li>
<li>[Save Setting]をクリック</li>
</ol>

<h3 id="12-属性と水準を入力">1.2. 属性と水準を入力</h3>

<p><figure><img src="../Figures/004.png" alt=""></figure></p>

<ol>
<li>[Attribute]下の[Add]をクリックし、taxと入力。すくなくともOS X環境では、<strong>Conjoint SDTから直接日本語入力はできない</strong>。テキストエディタで入力してコピペする方法は出来るが、phpで出力が出来ないため意味がない。まずは、全部英語で入力する。</li>
<li>同じ手順でanpoとwelfareを追加する。</li>
</ol>

<p><figure><img src="../Figures/005.png" alt=""></figure></p>

<ol start="3">
<li>[Attribute]でtaxを選択し、[Levels]の下のAddをクリックし、10%と入力</li>
<li>同じ手順で8%, 5%, 0%も入力する。</li>
<li>3~4の手順をanpo, welfareにも適用する。anpoにはyonin, hininを、welfareにはkakujyu, iji, shukushoを追加する。</li>
</ol>

<h3 id="13-ファイルで出力">1.3. ファイルで出力</h3>

<p><figure><img src="../Figures/006.png" alt=""></figure></p>

<ol>
<li>メニューの[Edit] → [Export to PHP]を選択し、適当に名前をつけて保存。</li>
<li>同じく[Edit] → [Create Qualtrics Question Templates]を選択し、適当な名前を付ける。ただし、この手順は必須ではない。</li>
</ol>

<hr>

<h2 id="2-phpファイルの修正とアップロード">2. phpファイルの修正とアップロード</h2>

<h3 id="21-phpファイルの修正">2.1. phpファイルの修正</h3>

<ul>
<li>テキストエディタ(私の場合はSublime Text)で先ほど保存したphpファイルを開く。</li>
<li>適当にtaxとかanpoで検索すれば、このような行が確認できる。</li>
</ul>
<pre><code>$featurearray = array(&#34;tax&#34; =&gt; array(&#34;10%&#34;,&#34;8%&#34;,&#34;5%&#34;,&#34;0%&#34;),&#34;anpo&#34; =&gt; array(&#34;yonin&#34;,&#34;hinin&#34;),&#34;welfare&#34; =&gt; array(&#34;kakujyu&#34;,&#34;iji&#34;,&#34;shukusho&#34;));</code></pre>
<ul>
<li>ここを以下のように修正する。</li>
</ul>
<pre><code>$featurearray = array(&#34;消費税&#34; =&gt; array(&#34;10%(引き上げ)&#34;,&#34;8%(維持)&#34;,&#34;5%(引き下げ)&#34;,&#34;0%(廃止)&#34;),&#34;集団的自衛権&#34; =&gt; array(&#34;容認&#34;,&#34;否認&#34;),&#34;福祉&#34; =&gt; array(&#34;拡充&#34;,&#34;維持&#34;,&#34;縮小&#34;));</code></pre>
<ul>
<li>保存する。</li>
</ul>

<h3 id="22-phpファイルのアップロード">2.2. phpファイルのアップロード</h3>

<ul>
<li><a href="https://panic.com/transmit/">Transmit</a>や<a href="https://cyberduck.io/?l=en">Cyberduck</a>を利用してphpがインストールされているサーバーにアップロードする。

<ul>
<li>学生が利用できる大学のWeb空間はphpが利用できないところが多いので、多分出来ないと思います</li>
</ul></li>
<li>自分のサーバーがない人はサーバーをレンタルするか、持っている人にご飯をおごる。</li>
<li>ちなみに私の場合、<code>http://tintstyle.cafe24.com/untitled.php</code>でアップロードしておきました。</li>
</ul>

<hr>

<h2 id="3-qualtricsで調査票作成">3. Qualtricsで調査票作成</h2>

<h3 id="31-phpファイルを埋め込む">3.1. phpファイルを埋め込む</h3>

<ol>
<li><a href="http://www.qualtrics.com/">Qualtrics</a>へログインし、[Create Survey]を選択。</li>
<li>[Quick Survey Builder]をクリックし、適当に名前を付ける。</li>
<li>[Survey Flow]をクリック。</li>
<li>新しいウィンドウに[Add a New Element Here]があるのでそれをクリック。</li>
<li>[Web Service]ボタンをクリック</li>
<li>先ほどアップロードしたphpファイルのアドレスを入力し、右の[Test URL]をクリック</li>
<li>[Select fields to include as embedded data]ウィンドウが表示される。[Select]の隣の[All]をクリックし、下の[Add Embedded Data]をクリック</li>
<li>そのまま[Save Flow]をクリックし、調査票作成画面へ戻る。</li>
</ol>

<h3 id="32-調査票作成">3.2. 調査票作成</h3>

<ol>
<li>[Create a New Question]でMultiple Choiceを選択する。</li>
<li>オプションはChoiceは3と入力し、Single Answerを選択。</li>
<li>選択肢の[Click to write Choice 1]を「候補者1」にし、残りの2つも同様に「候補者2, 3」とする。</li>
<li>質問文を作成するが、ここでは2つの方法がある。

<ul>
<li>1.3で[Create Qualtrics Question Templates]を選択した場合は3.2.1へ</li>
<li>選択しなかったら3.2.2へ
<br></li>
</ul></li>
</ol>

<h4 id="321-qualtrics-question-templateを利用した方法">3.2.1. Qualtrics Question Templateを利用した方法</h4>

<ol>
<li>1.3で[Create Qualtrics Question Templates]を選択したらTaskの数だけhtmlファイルが生成される。</li>
<li>テキストエディタでTask1のファイルを開き、全てのコピーする。</li>
<li>質問文をクリックし、ボックス上段の[HTML View]をクリックし、先ほどコピーしたものを貼り付ける。</li>
<li>[Normal View]をクリックし、質問文を修正する。</li>
<li>ここで注意するものは「${〜}」で囲まれている部分は修正しないこと。</li>
<li>その他の部分を修正すればいい。</li>
<li>次の質問を同様に作成し、今回はTask 2のhtmlファイルの内容を貼り付ける。</li>
</ol>

<h4 id="322-直接打ち込む方法">3.2.2. 直接打ち込む方法</h4>

<ol>
<li>自分なりに質問文を作成するが、属性は以下のように書く。

<ul>
<li><code>${e://Field/F-[タスク]-[属性]}</code></li>
</ul></li>
<li><code>${e://Field/F-1-3}</code>ならタスク1の3番めの属性であり、つまり「福祉」である。Conjoint SDTで属性のランダム化のチェックを外したため、すぐに分かる。</li>
<li>水準は以下のように表記する。

<ul>
<li><code>${e://Field/F-[タスク]-[プロフィール]-[属性]}</code></li>
</ul></li>
<li><code>${e://Field/F-1-3-1}</code>ならタスク1、候補者3、1番目の属性(福祉)の値である。これは0%, 5%, 8%, 10%からランダムに出る。</li>
<li>同じ手順でタスク2の質問文を作成する。その時は<code>${e://Field/F-2-[プロフィール]-[属性]}</code>のように書く。</li>
<li>以上の作業は[HTML View]でなく[Normal View]で行う。表を挿入するなら[Rich Content Editor]で作業すれば楽</li>
</ol>
</div>

</main>

        <footer>
            <p class="copyright text-muted" align = "center">© All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>. Customized by <a href="https://www.jaysong.net">Jaehyun Song</a></p>
        </footer>

        

        
    </body>

</html>

