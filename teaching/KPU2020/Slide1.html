<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>情報処理応用演習</title>
    <meta charset="utf-8" />
    <meta name="author" content="SONG Jaehyun (同志社大学)" />
    <script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="libs/jquery-1.12.4/jquery.min.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.14/datatables.js"></script>
    <link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="my-fonts.css" type="text/css" />
    <link rel="stylesheet" href="my-default.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# 情報処理応用演習
## 第1講: Rの基本的な使い方
### SONG Jaehyun (同志社大学)
### 2020/8/21

---



# 本日の内容

1. 講義概要
2. R?
3. RStudio
4. 電卓としてのR
5. データの読み込み/書き込み
6. R Markdown

---

class: inverse, center, middle

# 講義概要

---

class: top

## 講師紹介

.left-column[
![](Figs/01/Profile.jpg)
]

.right-column[
#### 宋 財泫 (そん じぇひょん)
* 同志社大学文化情報学部　助教
* 博士（政治学）：神戸大学
* E-mail: jasong@mail.doshisha.ac.jp
* HP: https://www.jaysong.net

#### 専門分野
* 政治行動論、政治学方法論

### 趣味
* ラーメン
]

---

## 講義内容

#### この授業で教えること

* Rを用いたデータ分析の教科書が読める基礎体力づくり
  * RとRStudioの導入
  * R Markdownの基礎
  * 電卓としてのR
  * 表形式データの読み込み/書き出し
  * 表形式データの操作
  * 可視化 (グラフ)

#### この授業で教えないこと
* データ分析の知識
  * 統計学
  * 因果推論
  * 数学

---

## 講義内容

* 1日目 (8/21): RとRStudioの基本的な使い方
* 2日目 (8/24): 表形式データの操作、SONGの結婚記念日
* 3日目 (8/25): 可視化入門

#### 1日目と2日目の間 (8/22, 23)
* [SONG・矢内の参考資料](https://www.jaysong.net/RBook/)を読む
* 必須: 第2, 6, 7, 8, 9章、第10.1, 10.2章
  * 2日目 (8/24)は以上の内容を熟知したと前提した上で講義を進める
* 推奨: 第12, 13, 14, 15, 16, 17, 18章
  * 2日目 (8/24)と3日目 (8/25)の内容に該当する
  * 講義後に読んでもOK

---

## 評価

### 平常点 (20%)
* 授業中の態度
* 積極的に質問する、ソンさんのミスを指摘する = 20点
* 黙ってソンさんの話を聞き、実習をこなす = 10点
* 講義中に歌う、焼きそばを食べる、喫煙・飲酒する = 0点

### 課題 (80%)
* データと結果物を事前に与える。
* 与えられたデータを用い、指定された結果を出すコードを提出
* 期限: 2020年8月30日 (予定)

---

## 教科書

指定なし

---

## 参考書

* SONGと矢内勇生 (高知工科大学)で執筆中の資料
  * [『私たちのR: ぼくらがかんがえたさいきょうのRほん』](https://www.jaysong.net/RBook/)
  * ネット上で無料で閲覧可能
  * 本講義の内容は18章まで
* 以下の本は本講義の内容を一部カバー
  * [『はじめてのRStudio』](https://www.amazon.co.jp/dp/B07K2PD1TX): 初心者向け
  * [『RユーザのためのRStudio[実践]入門』](https://www.amazon.co.jp/dp/B07F1KL3KR): 本講義を終えてから読もう


.pull-left[
&lt;center&gt;&lt;img src = "Figs/01/Book1.jpg" height = "230px"&gt;&lt;/center&gt;
]

.pull-right[
&lt;center&gt;&lt;img src = "Figs/01/Book2.jpg" height = "230px"&gt;&lt;/center&gt;
]

---
class: inverse, center, middle

## RとRStudioの導入

---

## RとRStudioの導入

#### 講義内

* 大学のPCの場合、インストール済み

#### 講義外

* 自分のPCに導入する場合、以下の資料を参照
  * [矢内勇生先生 (高知工科大学)の資料](https://yukiyanai.github.io/jp/resources/)
  * RおよびRStudioのインストールについては、(多分)世界一詳しい資料
  * macOS、Linux、Windowsに対応

---

class: inverse, center, middle
background-image: url(Figs/01/Rstudio1.png)
background-position: center
background-size: contain

## RStudioを起動してみよう

---

class: top

## RStudioをより使いやすく

#### RStudio設定画面
* Tools -&gt; Global Options

#### オススメの設定
* 矢内先生の資料
  * 宋を含む、多くのRStudioユーザーの標準設定
  * macOS編の40ページ
  * Linux編の27ページ
  * Windows編の104ページ

---

## プロジェクトの生成

Rを使用する際は必ず、予めプロジェクトを生成しておく
* 簡単な計算をするだけなら、しなくても良い

プロジェクト生成の手順
1. Finderやエクスプローラーからプロジェクトに使うフォルダーを作成する
2. RStudioのFile -&gt; New Project
3. Existing Directoryを選択
4. Project working directory:のBrowseをクリックし、1で作成したフォルダーを指定
5. 今後、プロジェクトを開く際はプロジェクトフォルダーのプロジェクトファイル (`.Rproj`)を開くだけでOK

---

## とりあえず、使ってみよう

* 簡単な計算ならConsoleに直接打ち込んでもOK
  * 電卓として使う場合
  

* ただし、ちゃんとした分析を行うなら&lt;span style="color:#FF0000; text-decoration-color:##FF0000; text-decoration: underline;"&gt;全ての分析プロセスを記録&lt;/span&gt;として残しておく必要がある。
  * 記録を残さない =&gt; `\(\bigcirc\)`保方さん...
  * File -&gt; New File -&gt; R Scriptをクリックするとコードを書けるペイン (Pane) が生成される
  * 実行したいコードの行でCmd (⌘) + Return (macOS)、またはControl + Enter (Linux/Windows)を押すと、行の内容がConsoleへコピペ&amp;実行される

---

## とりあえず、使ってみよう

* 1 + 1を計算してみよう
  * Sourceペイン上に`1+1`と入力し、⌘ + Return


```r
1 + 1
```

```
## [1] 2
```

* 5の6乗を計算してみよう 
  * Sourceペイン上に`5^6`と入力し、⌘ + Return


```r
5^6
```

```
## [1] 15625
```

---

## 数値演算子

|　演算子　|意味|例|　結果　|
|---      |---              |---                |---         |
|`+`      |和               |`2 + 5`            |7   |
|`-`      |差               |`2 - 8`            |-6   |
|`*`      |積               |`7 * 3`            |21   |
|`/`      |商               |`16 / 5`           |3.2  |
|`^`、`**`|累乗（べき乗）   |`2^3`または`2 ** 3`|8     |
|`%%`     |剰余 (モジュロ)  |`18 %% 7`          |4 |
|`%/%`    |整数商           |`18 %/% 7`         |2|

---

## 電卓としてのR

* 3と5の足し算を行い、その結果の2乗を求めてみよう
* 任意の奇数を2で割った後の余り (剰余)を求めてみよう
* 任意の偶数を2で割った後の余り (剰余)を求めてみよう

--


```r
(3 + 5)^2
```

```
## [1] 64
```

```r
9 %% 2
```

```
## [1] 1
```

```r
12 %% 2
```

```
## [1] 0
```

---

## 代入 (格納)

* `19861008 * 2`を計算してみよう
* `19861008 * 3`を計算してみよう
* `19861008 * 4`を計算してみよう
* `19861008 * 5`を計算してみよう
* `19861008 * 6`を計算してみよう

...

* `19861008 * 100`を計算してみよう



---

## 代入 (格納)

毎回、`19861009`のような意味深な数字を書くのは面倒くさい

* `19861008`を`X`にすれば保存れば`X * 1`、`X * 2`、...で済む
* `X`に`19861008`を「格納」（代入）する (`&lt;-`)
* `X`はオブジェクト (object)と呼ばれる


```r
# 19861008をXという名のオブジェクトに格納する
*X &lt;- 19861008
X     # Xを出力する
```

```
## [1] 19861008
```


```r
X * 3 # X * 3を計算し、出力する
```

```
## [1] 59583024
```

---

## 数列の作り方

* `19861008`は`X`で置換出来たが、1から100まで掛け算を行うことも面倒
* まずは1から100までの公差1の等差数列を作成する
* `seq(最小値, 最大値, by = 公差)`
* 公差1の等差数列は`最小値:最大値`も可能


```r
# 以下のコードは Y &lt;- 1:100 と同じ
*Y &lt;- seq(1, 100, by = 1)
Y
```

```
##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
##  [91]  91  92  93  94  95  96  97  98  99 100
```

---

## R内の全てのデータはベクトル

* `X &lt;- 3`の場合、`X`は長さ1の数値型ベクトル
* `Y &lt;- 1:5`の場合、`Y`は長さ5の数値型ベクトル
* `Z &lt;- c("A", "B", "C")`の場合、`Z`は長さ3の文字型ベクトル
  * `c()`はベクトルを作成する関数
  * 長さ1のベクトル、または`:`を使う場合、`c()`は不要
  

```r
Z &lt;- c("A", "B", "C")
Z         # Zの中身を出力
```

```
## [1] "A" "B" "C"
```

```r
length(Z) # Yの長さを出力
```

```
## [1] 3
```

```r
class(Z)  # Yのデータ型を出力
```

```
## [1] "character"
```

---

## ベクトル同士の計算

* 同じ長さのベクトル同士の場合、同じ位置の要素ごとに計算を行う


```r
X &lt;- c(1, 2, 3, 4) # 長さ = 4
Y &lt;- c(2, 3, 5, 7) # 長さ = 4
X + Y
```

```
## [1]  3  5  8 11
```

* 長さが異なる場合、短い方は繰り返される (recycle)


```r
Z &lt;- c(1, 0) # 長さ = 2
X * Z
```

```
## [1] 1 0 3 0
```

---

## 19861008

* `19861008 * 1`から`* 100`まで


```r
X &lt;- 1:100         # 1から100までの公差1の等差数列をXに格納   
Y &lt;- 19861008 * X  # 19861008 * Xの結果をYに格納
head(Y)            # Yの最初の要素6つを出力
```

```
## [1]  19861008  39722016  59583024  79444032  99305040 119166048
```

```r
tail(Y)            # Yの最後の要素6つを出力
```

```
## [1] 1886795760 1906656768 1926517776 1946378784 1966239792 1986100800
```

* `Y`の23番目の要素の結果を出力: `オブジェクト名[番号]`


```r
Y[23]
```

```
## [1] 456803184
```

---

## 色々計算してみよう

* `\(1^1\)`, `\(2^2\)`,..., `\(5^{5}\)`を計算してみよう


```r
# 方法1
X &lt;- 1:5
X^X
```

```
## [1]    1    4   27  256 3125
```

```r
# 方法2
(1:5)^(1:5)
```

```
## [1]    1    4   27  256 3125
```

* `c(1, 2, 3, 4, 5)`を2で割った後の余りは?


```r
c(1, 2, 3, 4, 5) %% 2
```

```
## [1] 1 0 1 0 1
```

---

## 論理演算子 (1)

* `X == Y`: `X`と`Y`が同じなら`TRUE`、以外は`FALSE`を出力
  * `&gt;`, `&gt;=`, `&lt;=`, `&lt;`, `!=`も可能


```r
1 + 1 `==` 2
```


```
## [1] TRUE
```


```r
# 1, 2, 3, 4, 5は偶数か否か
c(1, 2, 3, 4, 5) %% 2 == 0
```

```
## [1] FALSE  TRUE FALSE  TRUE FALSE
```

```r
# 1^1, 2^2, ..., 5^5は100以上か
((1:5)^(1:5)) &gt;= 100 
```

```
## [1] FALSE FALSE FALSE  TRUE  TRUE
```

---

## 論理演算子 (2)

* `&amp;`: かつ
* 例) `1:10`で8未満の奇数か否かを判定


```r
X &lt;- 1:10
*(X &lt; 8) &amp; ((X %% 2) == 1)
```

```
##  [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE
```

* `|`: または
* 例) `1:10`で3の倍数か、1を足すと3の倍数になるか否かを判定


```r
X &lt;- 1:10
*(X %% 3 == 0) | ((X + 1) %% 3 == 0)
```

```
##  [1] FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE
```

---

## 論理演算子の使い道

`-2:2`から偶数のみ出力したい
* 方法1: `TRUE`、`FALSE`を用いた要素の抽出


```r
X &lt;- -2:2 # X &lt;- c(-2, -1, 0, 1, 2)と同じ
*X[c(TRUE, FALSE, TRUE, FALSE, TRUE)] # 1, 3, 5番目の要素を抽出
```

```
## [1] -2  0  2
```

* 方法2: 論理演算子を利用する
  * 偶数 = 2で割った場合余りが0


```r
*X[X %% 2 == 0]
```

```
## [1] -2  0  2
```

---
class: inverse, middle, center

# Rの用語

---

## Rの用語

一般的なデータ (表形式)の扱い方を紹介する前に...

* 本講義で登場する重要な用語について

1. オブジェクト
2. データ型
3. データ構造
4. 欠損値
5. 関数と引数
6. 改行と字下げ
7. データ型: [SONG・矢内資料の第8章](https://www.jaysong.net/RBook/datatype.html)を参照

---

## オブジェクト

**オブジェクト (object):** メモリに割り当てられた何か
* `X &lt;- Y`演算子は`Y`を`X`という名でメモリに格納することを意味する
  * ベクトル
  * 行列 (1つのベクトルを2次元で表現したもの)
  * データフレーム (複数のベクトルを表のように並べたもの)
  * 関数など


```r
X &lt;- 1:5
X * 2
```

* オブジェクトは`X`のみ?
  * `X`、`&lt;-`、`1:5`、`*`、`2`全てがオブジェクト
  * `&lt;-`を使わない場合、一時的にメモリに割り当て、計算が終わったら削除される。

---

## データ型

データ内タイプ

* 数値 (numeric)

```r
X &lt;- c(1, 2, 1, 2, 3)
```
* 文字 (character)

```r
X &lt;- c("A", "B", "A", "B", "C")
```
* 要因 (factor)

```r
X &lt;- factor(c("A", "B", "A", "B", "C"),
            levels = c("A", "B", "C"))
```
* 複素数 (complex)
* 日付 (Date / DateTime)

---

## データ構造

* ベクトル
  * Rにおける最小単位
* 行列
  * 1つのベクトルを複数の行/列で表したもの
* データフレーム / tibble
  * 複数の縦ベクトルを並べたもの
  * tibbleはtidyverseで提供するデータフレームの拡張版
* リスト
  * ベクトル、行列、データフレームなど様々なデータ構造を内包するもの

---

## 欠損値

何らかの理由でデータが抜けている箇所
  * 世論調査の場合、回答拒否や「分からない」で生じる
  * 世界各国データの場合、データが入手困難な場合 (北朝鮮など)
  * 欠損値は`NA`で表す


```r
*X &lt;- c(1, 2, NA, 4, 5, NA, 7)
X
```

```
## [1]  1  2 NA  4  5 NA  7
```

* 分析の際、`NA`を含むデータは除去するか、統計的手法を用いて補完する
    * 補完 (multiple imputation)の方法は紹介しない

---

## 関数

**関数 (function):** 入力されたデータを、関数内部で決められた手順に沿って処理し、その結果を返す
  * `関数名(データ)`
  * 例) `sum()`関数は`()`内で与えた数値型ベクトルの総和を計算し返す


```r
X &lt;- c(2, 3, 5, 7, 11)
*sum(X)
```

```
## [1] 28
```

**注意:** 複数のパッケージが同じ名前の関数名を提供している場合
* `filter()`や`select()`など、複数のパッケージで共通する関数
* `パッケージ名::関数名()`で、どのパッケージの関数かを指定
  * **例)** `dplyr::select()`

---

## 引数

関数内で指定することで、関数の動き方を制御する
  * `sum()`、`mean()`関数は欠損値が含まれているデータに対して`NA`を返す


```r
X &lt;- c(1, 2, NA, 4, 5, NA, 7)
sum(X)
```

```
## [1] NA
```

  * `na.rm`の引数に`TRUE`を指定すると、自動的に欠損値を除外して計算を行う
  

```r
*sum(X, na.rm  = TRUE)
```

```
## [1] 19
```

  * 引数を書く順番は決められている
    * 順番通りに書くなら`na.rm = `などは不要だが、明示した方が良い
    * 引数の順番は`help(関数名)`で確認

---
class: inverse

## help(sum)の例

### Sum of Vector Elements

**Description**

sum returns the sum of all the values present in its arguments.

**Usage**

sum(..., na.rm = FALSE)

**Arguments**

...　　　numeric or complex or logical vectors.

na.rm　logical. Should missing values (including NaN) be removed?


---

## 改行と字下げ

一行のコードが長くならないように適宜、改行・字下げをする
* 結果には影響を与えないが、コードが読みやすくなる
* 演算子の前後にスペース、`,`の後にスペースを付けるのは慣例 (`^`を除く)


```r
# 悪い例
sum(c(97, NA, 97, 96, 108, NA, 99, 88, 85, 106, 85, 93, 81, 110, 95, 112, 118, NA, 105, 103, 96), na.rm = TRUE)
```

```
## [1] 1774
```


```r
# 良い例
sum(c(97, NA, 97, 96, 108, NA, 99, 88, 85, 106, 85, 93, 81, 110, 
      95, 112, 118, NA, 105, 103, 96), 
    na.rm = TRUE)
```

```
## [1] 1774
```

---

## コメント

コードの一部ではあるが、実行されないもの
* `#`で表記する
* `#`以降の内容は、当該行において無視される


```r
sum(1:5)
```

```
## [1] 15
```


```r
*sum(1:5) # 1から5までの総和を計算する
```

```
## [1] 15
```

* コードを書く際、&lt;span style = "color:#FF0000;"&gt;こまめにコメントを付けておく&lt;/span&gt;と読みやすくなる
  * 自分が書いたコードでも数日後に読んだら、よく分からない時が多い

---
class: inverse, middle, center

# データの入出力と表データ

---

## パッケージの導入

**パッケージ:** データ分析に便利な自作関数の集合
  * 2020年7月現在、[CRAN](https://cran.r-project.org/web/packages/)には約16000個のパッケージが登録されている。

**パッケージの導入:** `install.packages("パッケージ名")`
  * 1回インストールしておけば、パソコンに残る
  * 例: tidyverseパッケージのインストール


```r
install.packages("tidyverse")
```

* CRANでなく、[GitHub](https://github.com)に登録されているパッケージ
  - `devtools::install_github(レポジトリ名/パッケージ名)`
  - 事前にdevtoolsパッケージをインストールしておく必要あり
  - 例) SONGが公開したBalanceRパッケージの場合
  

```r
devtools::install_github("JaehyunSong/BalanceR")
```

---

## パッケージの読み込み

パッケージを使用するためには、読み込む必要がある

  - `library(パッケージ名)`
  - &lt;span style = "color:#FF0000;"&gt;Rを再起動するたびに読み込む必要がある&lt;/span&gt;
  - tidyverse: 本講義における最重要パッケージ


```r
library(tidyverse)
```

---

## 表形式データの読み込み

1. データをプロジェクトフォルダー内に入れる
    - 下位フォルダー (`Data`など)を作成し、ここにまとめる
2. データのタイプに応じた関数を使用する
    - `.csv`: `read_csv()`関数
    - `.xlsx`: `read_xlsx()`関数
    - 以上の関数はreadrパッケージが提供している関数であり、readrパッケージはtidyverseを読み込む際に同時に読み込まれる
    - 他にもhavenパッケージを使うと、SPSS形式 (`.sav`)、Stata形式 (`.dta`)、オーブンドキュメント形式 (`.ods`)も読み込み可能
    
---

## csvフォーマット

* エクセル (`.xlsx`)と同様、表形式のファイル
  - メモ帳などでも閲覧、編集可能
* フォント、セルの色、枠線などの**データとして**無駄な情報を含まない
  - エクセルより軽量
* データ分析における標準フォーマット
  - エクセルファイルを正確に開けるソフトはエクセルのみ
  - 一方、`.csv`はどのソフトでも同じ表が得られる。
* 本講義で使うデータはすべて`.csv`

---

## 実習データ1

* [FIFA_Men.csv](Data/FIFA_Men.csv): FIFA男子サッカーランキング

<div id="htmlwidget-58f0bed0b4eb907d0b0d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-58f0bed0b4eb907d0b0d">{"x":{"filter":"none","data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210],["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Cayman Islands","Central African Republic","Chad","Chile","China PR","Chinese Taipei","Colombia","Comoros","Congo","Congo DR","Costa Rica","Côte d'Ivoire","Croatia","Cuba","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","England","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Faroe Islands","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Grenada","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","IR Iran","Iraq","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Korea DPR","Korea Republic","Kosovo","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Northern Ireland","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Republic of Ireland","Romania","Russia","Rwanda","Samoa","San Marino","São Tomé and Príncipe","Saudi Arabia","Scotland","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","St. Kitts and Nevis","St. Lucia","St. Vincent and the Grenadines","Sudan","Suriname","Sweden","Switzerland","Syria","Tahiti","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Uganda","Ukraine","United Arab Emirates","Uruguay","US Virgin Islands","USA","Uzbekistan","Vanuatu","Venezuela","Vietnam","Wales","Yemen","Zambia","Zimbabwe"],[149,66,35,192,135,124,210,126,9,102,200,42,26,114,195,99,187,162,87,1,170,84,168,189,75,49,148,3,208,191,59,59,149,78,173,53,73,193,109,177,17,76,138,10,133,89,56,46,61,6,179,80,95,45,16,184,184,158,63,51,69,4,145,205,104,153,146,110,163,58,2,83,159,91,15,46,196,54,159,199,130,74,118,166,86,62,143,52,39,108,173,33,70,93,13,48,28,97,118,107,116,40,115,147,96,188,137,89,139,152,101,180,131,98,182,91,123,154,155,56,184,100,172,11,175,190,64,183,43,106,136,117,170,14,156,122,151,112,31,68,36,44,82,200,103,81,165,41,21,124,19,7,178,55,34,37,38,131,194,209,181,67,50,20,29,202,118,157,32,64,141,196,71,168,8,206,139,176,167,128,141,17,12,79,161,121,134,113,196,126,203,105,27,29,129,203,77,24,71,5,207,22,85,163,25,94,23,144,88,111],[1052,1356,1482,900,1082,1136,821,1127,1623,1213,867,1457,1507,1177,880,1225,914,1009,1283,1765,974,1295,983,911,1324,1430,1055,1712,842,904,1381,1381,1052,1318,964,1413,1332,897,1184,943,1579,1323,1078,1622,1088,1269,1389,1439,1378,1642,936,1313,1251,1446,1598,919,919,1019,1368,1420,1346,1661,1066,856,1202,1042,1061,1181,996,1386,1733,1297,1015,1267,1602,1439,879,1409,1015,873,1104,1328,1155,988,1285,1377,1072,1416,1465,1187,964,1489,1344,1260,1607,1438,1500,1238,1155,1199,1170,1464,1174,1060,1240,912,1079,1269,1074,1047,1215,926,1089,1236,922,1267,1141,1040,1038,1389,919,1223,965,1621,959,906,1365,921,1456,1200,1081,1160,974,1604,1035,1149,1051,1179,1493,1347,1476,1451,1303,867,1204,1305,991,1461,1544,1136,1559,1639,941,1396,1486,1475,1470,1089,894,824,923,1351,1422,1555,1494,866,1155,1020,1490,1365,1073,879,1334,983,1636,853,1074,953,986,1112,1073,1579,1608,1314,1014,1152,1086,1178,879,1127,862,1201,1506,1494,1107,862,1321,1537,1334,1645,844,1542,1286,996,1517,1258,1540,1071,1279,1180],[1052,1356,1482,900,1082,1136,821,1127,1623,1213,867,1457,1507,1177,880,1225,914,1009,1280,1765,974,1295,984,911,1324,1430,1055,1712,842,904,1381,1381,1052,1318,964,1413,1332,897,1184,943,1579,1323,1078,1622,1088,1269,1389,1439,1378,1642,936,1313,1251,1446,1598,919,919,1019,1368,1420,1346,1661,1066,856,1202,1042,1061,1181,996,1386,1733,1297,1015,1267,1602,1439,879,1409,1015,873,1106,1328,1155,988,1285,1377,1072,1416,1465,1187,964,1489,1344,1260,1607,1437,1500,1238,1155,1199,1170,1464,1174,1060,1240,912,1079,1269,1074,1047,1215,926,1089,1236,922,1267,1141,1040,1038,1389,919,1223,965,1621,959,906,1365,921,1456,1200,1081,1160,974,1604,1035,1149,1050,1179,1493,1347,1476,1451,1303,867,1204,1304,991,1461,1544,1136,1559,1639,941,1396,1486,1475,1470,1089,894,824,923,1351,1422,1555,1494,866,1155,1020,1490,1365,1073,879,1334,983,1636,853,1074,953,986,1112,1073,1579,1608,1314,1014,1152,1086,1178,879,1127,862,1201,1506,1494,1107,862,1321,1537,1334,1645,844,1542,1289,996,1517,1258,1540,1071,1279,1180],["AFC","UEFA","CAF","OFC","UEFA","CAF","CONCACAF","CONCACAF","CONMEBOL","UEFA","CONCACAF","AFC","UEFA","UEFA","CONCACAF","AFC","AFC","CONCACAF","UEFA","UEFA","CONCACAF","CAF","CONCACAF","AFC","CONMEBOL","UEFA","CAF","CONMEBOL","CONCACAF","AFC","UEFA","CAF","CAF","CAF","AFC","CAF","CONCACAF","CONCACAF","CAF","CAF","CONMEBOL","AFC","AFC","CONMEBOL","CAF","CAF","CAF","CONCACAF","CAF","UEFA","CONCACAF","CONCACAF","UEFA","UEFA","UEFA","CAF","CONCACAF","CONCACAF","CONMEBOL","CAF","CONCACAF","UEFA","CAF","CAF","UEFA","CAF","CAF","UEFA","OFC","UEFA","UEFA","CAF","CAF","UEFA","UEFA","CAF","UEFA","UEFA","CONCACAF","AFC","CONCACAF","CAF","CAF","CONCACAF","CONCACAF","CONCACAF","AFC","UEFA","UEFA","AFC","AFC","AFC","AFC","UEFA","UEFA","CONCACAF","AFC","AFC","UEFA","CAF","AFC","AFC","UEFA","AFC","AFC","AFC","UEFA","AFC","CAF","CAF","CAF","UEFA","UEFA","UEFA","AFC","CAF","CAF","AFC","AFC","CAF","UEFA","CAF","CAF","CONCACAF","UEFA","AFC","UEFA","CONCACAF","CAF","CAF","AFC","CAF","AFC","UEFA","OFC","OFC","CONCACAF","CAF","CAF","UEFA","UEFA","UEFA","AFC","AFC","AFC","CONCACAF","OFC","CONMEBOL","CONMEBOL","AFC","UEFA","UEFA","CONCACAF","AFC","UEFA","UEFA","UEFA","CAF","OFC","UEFA","CAF","AFC","UEFA","CAF","UEFA","CAF","CAF","AFC","UEFA","UEFA","OFC","CAF","CAF","CAF","UEFA","AFC","CONCACAF","CONCACAF","CONCACAF","CAF","CONCACAF","UEFA","UEFA","AFC","OFC","AFC","CAF","AFC","AFC","CAF","OFC","CONCACAF","CAF","UEFA","AFC","CONCACAF","CAF","UEFA","AFC","CONMEBOL","CONCACAF","CONCACAF","AFC","OFC","CONMEBOL","AFC","UEFA","AFC","CAF","CAF"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>ID<\/th>\n      <th>Team<\/th>\n      <th>Rank<\/th>\n      <th>Points<\/th>\n      <th>Prev_Points<\/th>\n      <th>Confederation<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

## データの読み込み

`read_csv("ファイル名")`関数で読み込む
* ファイル名にはファイルが入っているフォルダー名も含む


```r
# Dataフォルダー内のFIFA_Men.csvを読み込み、FIFA_dfという名で格納
*FIFA_df &lt;- read_csv("Data/FIFA_Men.csv") 
```

---

## 中身の確認

オブジェクト名を入力するだけ
* 最初の10行が表示される
* 出力する行数を指定したい場合、`print(オブジェクト名, n = 行数)`
* `head()`: 最初の6行、`tail()`: 最後の6行


```r
# FIFA_dfの最初の5行を出力
print(FIFA_df, n = 5)
```

```
## # A tibble: 210 x 6
##      ID Team            Rank Points Prev_Points Confederation
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
## 1     1 Afghanistan      149   1052        1052 AFC          
## 2     2 Albania           66   1356        1356 UEFA         
## 3     3 Algeria           35   1482        1482 CAF          
## 4     4 American Samoa   192    900         900 OFC          
## 5     5 Andorra          135   1082        1082 UEFA         
## # … with 205 more rows
```

---
## 文字化けしたら?

主にマルチバイト文字 (日本語/中国語/韓国語)が含まれているデータで生じる
* [FIFA_Men.csv](Data/FIFA_Men.csv)はローマ字のみ

**解決法:** `locale`引数を追加する。

* Windowsの場合
  - 主にデータがUTF-8 (世界標準)で記録されている場合に生じる


```r
Data &lt;- read_csv("ファイル名", 
                 locale = locale(encoding = "utf8"))
```

* macOS/Linuxの場合
  - 主にデータがShift-JIS(Windows独自)で記録されている場合に生じる


```r
Data &lt;- read_csv("ファイル名", 
                 locale = locale(encoding = "Shift_JIS"))
```

---

## 列の抽出 (1)

`オブジェクト名$列名`で抽出
* ベクトルとして出力される
* 表データは縦方向のベクトルを横に並べたもの


```r
# FIFA_dfのRank列
*FIFA_df$Rank
```

```
##   [1] 149  66  35 192 135 124 210 126   9 102 200  42  26 114 195  99 187 162
##  [19]  87   1 170  84 168 189  75  49 148   3 208 191  59  59 149  78 173  53
##  [37]  73 193 109 177  17  76 138  10 133  89  56  46  61   6 179  80  95  45
##  [55]  16 184 184 158  63  51  69   4 145 205 104 153 146 110 163  58   2  83
##  [73] 159  91  15  46 196  54 159 199 130  74 118 166  86  62 143  52  39 108
##  [91] 173  33  70  93  13  48  28  97 118 107 116  40 115 147  96 188 137  89
## [109] 139 152 101 180 131  98 182  91 123 154 155  56 184 100 172  11 175 190
## [127]  64 183  43 106 136 117 170  14 156 122 151 112  31  68  36  44  82 200
## [145] 103  81 165  41  21 124  19   7 178  55  34  37  38 131 194 209 181  67
## [163]  50  20  29 202 118 157  32  64 141 196  71 168   8 206 139 176 167 128
## [181] 141  17  12  79 161 121 134 113 196 126 203 105  27  29 129 203  77  24
## [199]  71   5 207  22  85 163  25  94  23 144  88 111
```

---

## 列の抽出 (2)

`オブジェクト名[, 列名]`で抽出
* 複数の列を抽出する場合


```r
# FIFA_dfのTeam, Rank, Points列
# , の位置に注意
*Rank_df &lt;- FIFA_df[, c("Team", "Rank", "Points")]
print(Rank_df, n = 5)
```

```
## # A tibble: 210 x 3
##   Team            Rank Points
##   &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan      149   1052
## 2 Albania           66   1356
## 3 Algeria           35   1482
## 4 American Samoa   192    900
## 5 Andorra          135   1082
## # … with 205 more rows
```

---

## 列の抽出 (3)

`オブジェクト名[, 列番号]`で抽出


```r
# FIFA_dfの2, 3, 6番目列
# , の位置に注意
*Rank_df &lt;- FIFA_df[, c(2, 3, 6)]
print(Rank_df, n = 5)
```

```
## # A tibble: 210 x 3
##   Team            Rank Confederation
##   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;        
## 1 Afghanistan      149 AFC          
## 2 Albania           66 UEFA         
## 3 Algeria           35 CAF          
## 4 American Samoa   192 OFC          
## 5 Andorra          135 UEFA         
## # … with 205 more rows
```

---

## 行の抽出 (1)

`オブジェクト[行番号, ]`で抽出


```r
# FIFA_dfの97, 102行目を出力
# , の位置に注意
*FIFA_df[c(97, 102), ]
```

```
## # A tibble: 2 x 6
##      ID Team            Rank Points Prev_Points Confederation
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
## 1    97 Japan             28   1500        1500 AFC          
## 2   102 Korea Republic    40   1464        1464 AFC
```

---

## 行の抽出 (2)

`オブジェクト[TRUE/FALSE, ]`で抽出
* `Rank`列の値が10以下の行を抽出
* `FIFA_df$Rank &lt;= 10`で判定


```r
Rank_Over10 &lt;- FIFA_df$Rank &lt;= 10
Rank_Over10
```

```
##   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [25] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [49] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE
```

---

## 行の抽出 (2)


```r
FIFA_df[Rank_Over10, ]
```

```
## # A tibble: 10 x 6
##       ID Team       Rank Points Prev_Points Confederation
##    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
##  1     9 Argentina     9   1623        1623 CONMEBOL     
##  2    20 Belgium       1   1765        1765 UEFA         
##  3    28 Brazil        3   1712        1712 CONMEBOL     
##  4    44 Colombia     10   1622        1622 CONMEBOL     
##  5    50 Croatia       6   1642        1642 UEFA         
##  6    62 England       4   1661        1661 UEFA         
##  7    71 France        2   1733        1733 UEFA         
##  8   152 Portugal      7   1639        1639 UEFA         
##  9   175 Spain         8   1636        1636 UEFA         
## 10   200 Uruguay       5   1645        1645 CONMEBOL
```


```r
# []内に直接打ち込んでもOK
FIFA_df[FIFA_df$Rank &lt;= 10, ]
```

---

## 行の抽出: 応用

* `Rank`が50以下、かつ`Confederation`が`"AFC"`の行

--


```r
Temp_Vec &lt;- (FIFA_df$Rank) &lt;= 50 &amp; (FIFA_df$Confederation == "AFC")
FIFA_df[Temp_Vec, ]
```

```
## # A tibble: 4 x 6
##      ID Team            Rank Points Prev_Points Confederation
##   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
## 1    12 Australia         42   1457        1457 AFC          
## 2    92 IR Iran           33   1489        1489 AFC          
## 3    97 Japan             28   1500        1500 AFC          
## 4   102 Korea Republic    40   1464        1464 AFC
```

* `[]`内に直接条件式を打ち込んでも良いが、一行が長くなりやすいので、別途のオブジェクトとして格納することを推奨

---

## 行の抽出: 応用

* `Points`が前より増加した行のみ
  * `Points`が`Prev_Points`より大きいかを判定

--


```r
Temp_Vec &lt;- FIFA_df$Points &gt; FIFA_df$Prev_Points
FIFA_df[Temp_Vec, ]
```

```
## # A tibble: 4 x 6
##      ID Team       Rank Points Prev_Points Confederation
##   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        
## 1    19 Belarus      87   1283        1280 UEFA         
## 2    96 Jamaica      48   1438        1437 CONCACAF     
## 3   137 Nicaragua   151   1051        1050 CONCACAF     
## 4   146 Panama       81   1305        1304 CONCACAF
```

---

## 要素の抽出

**方法1:** `オブジェクト[行番号, 列番号]`で抽出 (結果は&lt;span style = "color:#FF0000;"&gt;データフレーム&lt;/span&gt;形式)


```r
# FIFA_dfの97行、2列目の要素をを抽出
FIFA_df[97, 2]
```

```
## # A tibble: 1 x 1
##   Team 
##   &lt;chr&gt;
## 1 Japan
```

**方法2:** `オブジェクト$列名[要素の位置]`で抽出 (結果は&lt;span style = "color:#FF0000;"&gt;ベクトル&lt;/span&gt;形式)


```r
# FIFA_dfのTeam列の97番目の要素を抽出
FIFA_df$Team[97]
```

```
## [1] "Japan"
```

---

## もっと表をいじりたい

2日目の講義内容: `dplyr`と`tidyr`パッケージの使い方

* 行と列の抽出
* 行のソート
* 表の中身を要約
  * 列の平均値、標準誤差、分散など
* 表の中身をグループごとに要約
* 表の結合
* Wide型とLong型の変換など

3日目は綺麗に整形した表を用いた可視化 (グラフの作成)が中心

---

class: inverse, center, middle

# データの書き出し

---

## データの書き出し

ファイルサイズの観点から`.csv`で保存することを推奨
* `write_csv()`関数を使用
* `Confederation`が`"AFC"`の行のみを抽出し、`AFC_df`に格納
* `AFC_df`をDataフォルダーの`AFC_Men.csv`という名で保存


```r
AFC_df &lt;- FIFA_df[FIFA_df$Confederation == "AFC", ]
*write_csv(AFC_df, "Data/AFC_Men.csv")
```

* `AFC_Men.csv`を`FIFA_df2`という名で読み込み、中身を確認してみよう

---

class: inverse, center, middle

# R Markdown基礎

---

## R Markdownとは

文章・コード・結果を1つのコードにまとめたもの

* R + Markdown
  * 比較的簡単な文法で構造化された文書の作成が可能
  * Rのコードとその結果を同時に載せることが可能
  * 本講義の最終課題もR Makrdownで提出する
* 出力形式は
  1. HTML (デフォルト)
      - インタラクティブな文書生成可能
  2. Microsoft Word
      - 非推奨
      - 考えた体裁と異なる体裁が得られるケースが多い
  3. PDF
      - 自分のPCに `\({\LaTeX}\)` 環境が必要
* スライドの作成可能
  * 本講義のスライドもR Markdown (+xaringanパッケージ)で作成

---

## RMakrdownの例

.pull-left[
&lt;center&gt;&lt;img src="Figs/01/Markdown_Exam1.png", width = "85%"&gt;&lt;/center&gt;
]
.pull-right[
&lt;center&gt;&lt;img src="Figs/01/Markdown_Exam2.png"&gt;&lt;/center&gt;
]

---

## はじめてのR Markdown

#### ファイルの作成

* File -&gt; New File -&gt; R Markdown..を選択
  * TitleとAuthorには文書のタイトルと作成者
  * Default output formatはHTMLのままでOKの
  
#### とりあえずKnit!

* とりあえず、Sourceペイン上段の&lt;img src="Figs/01/Knit.png" height = "20px"/&gt;をクリックしてみよう
  * Knitは「ニット」と読む
  * 最初のKnitの際、ファイルを保存する必要がある
  * Viewerペインにプレビューが出力
  * SourceペインとViewerペインの関係を対応させてみよう

---

## R Markdwonの構成要素: ヘッダー

#### ヘッダー (Header)

* RMakrdownの最上段に位置し、`---`と`---`の間
* 文書のタイトル、作成者、日付などの情報が含まれる
* 自由に修正可能
* `output`項目は中級者向け

```yaml
---
title: "R Markdownの例"
author: "Jaehyun Song"
date: "7/24/2020"
output: html_document
---
```

---

## R Markdownの構成要素: チャンク

#### チャンク (Chunk)


* Rコードの入力箇所
* &lt;span style="color:#FF0000;"&gt;必ず```` ```{r} ````と```` ``` ````で囲む&lt;/span&gt;
  * チャンクの外にコードを書いても文章として認識する
* コードの出力-&gt;結果の出力の順番

````markdown
ここはチャンクの外
ここに書いたものは文章として扱われる。

*```{r}
*ここはチャンク内
*ここにコードを書く
*ここに書いたものはコードと結果が出力される
*```

ここに書いてのも文章
````

```` ````

---

## チャンクオプション

* ```` ```{r, オプション1, オブション2, ...} ````で指定
* オプションの例
  * コードを見せず、結果だけ表示: `echo = FALSE`
  * コードのみ表示し、計算は行わない: `eval = FALSE`
  * 出力される図を中央揃え: `fig.align = "center"`
  * 警告メッセージを隠す: `warning = FALSE`
  * 他にも数十のオプションの指定が可能
    * 詳しくは[R Markdown Cheetsheet](https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf)を参照

```` ````

---

## Markdownの文法: 改行

* 文章の改行は空の行を挿入
* 単なる改行では改行されない

.pull-left[
**Input:**

```markdown
1行目
2行目
```

**Output:**

1行目
2行目

]
.pull-right[
**Input:**

```markdown
1行目
*
2行目
```

**Output:**

1行目

2行目

]


---

## Markdownの文法: タイトル

文章の前に`#`を付ける
* `#`が多いほど文字サイズは小さくなる

```markdown
# タイトル1
```

# タイトル1

```markdown
### タイトル2
```

### タイトル2

---

## Markdownの文法: 項目

.pull-left[
順序なしの場合: `*`または`-`

**Input:**
```markdown
- 項目1
  - 項目1-a
  - 項目1-b
- 項目2
- 項目3
```

**Output:**
- 項目1
  - 項目1-a
  - 項目1-b
- 項目2
- 項目3
]

.pull-right[
順序付きの場合: `1.`

**Input:**
```markdown
1. 項目1
  1. 項目1-a
  2. 項目1-b
2. 項目2
3. 項目3
```

**Output:**
1. 項目1
  1. 項目1-a
  2. 項目1-b
2. 項目2
3. 項目3
]

---

## Markdownの文法: 強調

.pull-left[
太字: `**`と`**`で囲む

**Input:**
```markdown
 **ラーメン**大好き！
```

**Output:** **ラーメン**大好き！

---

イタリック: `*`と`*`で囲む

**Input:**
```markdown
 *ラーメン*大好き！
```

**Output:** *ラーメン*大好き！
]
.pull-right[
下線: `&lt;u&gt;`と`&lt;/u&gt;`で囲む

**Input:**
```markdown
&lt;u&gt;ラーメン&lt;/u&gt;大好き！
```

**Output:** &lt;u&gt;ラーメン&lt;/u&gt;大好き！

---

取り消し線: `~~`と`~~`で囲む

**Input:**
```markdown
 ~~ラーメン~~大好き！
```

**Output:** ~~ラーメン~~大好き！
]

---

## Markdownの文法: インラインコード

文章内にRコードの結果を埋め込む場合
  * `` `r ``と`` ` ``の間にコードを挿入

**Input:**
````markdown
```{r}
x = 5 # 円の半径
```

円の半径は`r x`、面積は`r 3.14 * x^2`です。
````

```` ````

**Output:**

```r
x = 5 # 円の半径
```

円の半径は5、面積は78.5です。

---

## Markdownの文法: 文章内コメント

出力に影響されないコメントを入れる場合
* `&lt;!--`と`--&gt;`内に囲む
* `&lt;!--`と`--&gt;`の間の文章は出力されない
* チャンク内コメントはRと同様、`#`でOK

**Input:**
```markdown
*&lt;!--
*これはコメントです。
*--&gt;
これは文章です。
```

**Output:**

これは文章です。

---

## Markdownの文法

ここで紹介したのはMarkdownのごく一部
* 水平線
* リンク
* 画像の埋め込み
* 表の作成など

詳しくは[R Markdown Cheat Sheet](https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf)を参照
* RStudioのHelp-&gt;Cheatsheetsからも確認可能
* ググれば日本語資料もたくさんある

---

## Rに慣れるためには...

* エラーメッセージをいっぱい出す
* そして、エラーの原因を考え、修正していく
* 出来る限り、色々試し、トラブル・失敗に出会う
* 成功しか経験しないと、トラブルに対応できなくなる
* エラーが出てもパソコンが壊れたり、爆発したりはしない
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": false,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
