---
title: "Rによるオブジェクト指向プログラミング入門"
date: '2020-05-20'
categories: []
tags: ["R", "プログラミング"]
markup: "mmark"
editor_options: 
  chunk_output_type: console
output: 
  html_document:
    toc: true
---

# 1. まずは例から

```{r}
Vector1 <- c(1, 5, 3, 7, 9, 12, 5, 4, 10, 1)
Vector2 <- c("A", "B", "D", "B", "E", "A", "A", "D", "C", "C")
```

```{r}
summary(Vector1)
summary(Vector2)
```

同じ`summary()`関数ですが、中のデータのタイプによって動きが異なります。これがオブジェクト指向プログラミングにおいて「**多態性** (polymorphism)」と呼ばれる概念です。同じ関数でもデータ型、またはデータ構造に応じて異なる動きをすることです。ここでのデータ型やデータ構造を、OOPでは「**クラス** (class)」と呼びます。クラスは`class()`関数で確認することができます。

```{r}
class(Vector1)
class(Vector2)
```

`Vector1`はnumeric、`Vector2`はcharacterです。もし、無理矢理に`Vector1`のクラスをcharacterに変えればどうなるでしょうか。クラスの変更は`class(オブジェクト名) <- "クラス名"`でできます。一つのオブジェクトは複数のクラスが持てますが、これはOOPの「**継承** (inheritance)」概念に関係するので後で解説します。ここではまず、`Vector1`のクラスをcharacterにし、もう一回`summary()`を使ってみましょう。

```{r}
class(Vector1) <- "character"
summary(Vector1)
```

データの中身は変わっていませんが、`summary()`関数の動き方が変わりました。このように、Rで頻繁に使う`summary()`、`print()`、`plot()`などの関数は様々なクラスの対応しております。`lm()`関数を使った回帰分析の結果オブジェクトのクラス名は`lm`であり、その結果を見るためにも`summary()`関数を使います。他にも`plot(lmオブジェクト名)`をすると回帰診断の図が表示されます。これができないと、各クラスに応じた関数を作成する必要がありますね。numeric型専用の`numeric_print()`、character型専用の`character_print()`、lm型専用の`lm_plot()`など...、覚えなきゃいけない関数が増えてきます。ユーザー側でも大変ですが、コードを作成する側も大変です。実際、下の図[^HardestTasks]を見ると、プログラマーにとって最も大変な仕事は「名付け」であることが分かります。

[^HardestTasks]: 図の出典は[IT WORLD](https://www.itworld.com/article/2833265/don-t-go-into-programming-if-you-don-t-have-a-good-thesaurus.html)です (アクセス: 2020-05-21)。

```{r HardestTasks, echo = FALSE}
knitr::include_graphics("https://images.techhive.com/images/idge/imported/article/itw/2013/10/23/programmers_hardest_tasks-600x700-100521914-orig.jpg")
```

OOPの多態性にはこのような煩わしい仕事を軽減する機能があります。OOPにはここで紹介した多態性以外にも、「**継承** (inheritance)」、「**カプセル化** (encapsulation)」のような特徴があります。他にも人によっては「メッセージパッシング (message passing)」、「動的バインディング (dynamic binding)」などの特徴を述べたりしますが、詳しい話は専門書に譲り合いと思います。また、ここではRのS3クラスについて解説しますが、S3はカプセル化に対応しておりません。したがって、ここでは以下の概念について例と一緒に解説していきたいと思います。

1. オブジェクト (object)
2. クラス (class)
3. メソッド (method)
4. 多態性 (polymorphism)　
5. 継承 (inheritance)

---

# 2. OOPとは

# 3. RにおけるOOP

# 4. とりあえず作ってみる